<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Resizable Photo Album Grid (GPT-5.2)</title>

    <!-- Bootstrap 5 CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <style>
      :root {
        --gutter: 12px;
        --page-bg: #ffffff;
        --album-bg: #2b2f36;
        --app-bg: #0f1115;
        --hint-fg: rgba(255, 255, 255, 0.75);
        --hint-bg: rgba(0, 0, 0, 0.35);
        --hint-border: rgba(255, 255, 255, 0.18);
      }

      body {
        margin: 0;
        min-height: 100vh;
        background: radial-gradient(1200px 700px at 50% 10%, #1b2230 0%, var(--app-bg) 55%, #0b0d11 100%);
        overflow: hidden; /* keep drag clean */
      }

      .app {
        min-height: 100vh;
        display: grid;
        place-items: center;
        padding: 18px;
      }

      /* Spread: maximize within viewport while keeping the full 2-page aspect (70:29) */
      .spread {
        width: 100%;
        height: 100%;
        max-width: 100vw;
        max-height: calc(100vh - 36px);
        background: linear-gradient(90deg, #20242c 0%, var(--album-bg) 50%, #20242c 100%);
        border-radius: 14px;
        padding: 14px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.55);
        display: flex;
        gap: 10px; /* spine gap between pages */
        align-items: stretch;
        justify-content: center;
      }

      .page {
        flex: 1 1 0;
        background: var(--page-bg);
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 8px 18px rgba(0, 0, 0, 0.25);
        display: flex;
        flex-direction: column;
      }

      /* Split.js expects flex parents for its panes */
      .page-row {
        display: flex;
        width: 100%;
        overflow: hidden;
      }

      .cell {
        overflow: hidden;
        background: #e9ecef;
      }

      .cell img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        user-select: none;
        -webkit-user-drag: none;
      }

      /* Gutters are the visible "white space" between cells/rows */
      .gutter {
        background-color: #ffffff;
        background-repeat: no-repeat;
        background-position: center;
      }

      /* Between rows (top/bottom) */
      .gutter.gutter-vertical {
        cursor: row-resize;
      }

      /* Between cells (left/middle/right) */
      .gutter.gutter-horizontal {
        cursor: col-resize;
      }

      /* Subtle affordance on hover (still reads as white space) */
      .gutter:hover {
        background-image: linear-gradient(
          90deg,
          rgba(13, 110, 253, 0) 0%,
          rgba(13, 110, 253, 0.35) 50%,
          rgba(13, 110, 253, 0) 100%
        );
      }
      .gutter.gutter-vertical:hover {
        background-image: linear-gradient(
          0deg,
          rgba(13, 110, 253, 0) 0%,
          rgba(13, 110, 253, 0.35) 50%,
          rgba(13, 110, 253, 0) 100%
        );
      }

      .hint {
        position: fixed;
        left: 16px;
        bottom: 16px;
        max-width: min(560px, calc(100vw - 32px));
        color: var(--hint-fg);
        background: var(--hint-bg);
        border: 1px solid var(--hint-border);
        border-radius: 12px;
        padding: 10px 12px;
        backdrop-filter: blur(8px);
        font-size: 0.95rem;
        line-height: 1.35;
      }
      .hint kbd {
        background: rgba(255, 255, 255, 0.12);
        color: rgba(255, 255, 255, 0.85);
        border: 1px solid rgba(255, 255, 255, 0.18);
      }

      /* Mobile: allow scrolling if necessary */
      @media (max-width: 768px) {
        body {
          overflow: auto;
        }
        .app {
          min-height: 100vh;
          padding: 10px;
        }
        .spread {
          max-height: none;
        }
      }
    </style>
  </head>

  <body>
    <div class="app">
      <div class="spread" id="spread" aria-label="Two-page photo album spread">
        <!-- Left Page -->
        <section class="page" id="page-left" aria-label="Left page">
          <div class="page-row" id="left-row-top">
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-01/1200/900" alt="Placeholder 1" />
            </div>
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-02/1200/900" alt="Placeholder 2" />
            </div>
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-03/1200/900" alt="Placeholder 3" />
            </div>
          </div>
          <div class="page-row" id="left-row-bottom">
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-04/1200/900" alt="Placeholder 4" />
            </div>
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-05/1200/900" alt="Placeholder 5" />
            </div>
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-06/1200/900" alt="Placeholder 6" />
            </div>
          </div>
        </section>

        <!-- Right Page -->
        <section class="page" id="page-right" aria-label="Right page">
          <div class="page-row" id="right-row-top">
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-07/1200/900" alt="Placeholder 7" />
            </div>
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-08/1200/900" alt="Placeholder 8" />
            </div>
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-09/1200/900" alt="Placeholder 9" />
            </div>
          </div>
          <div class="page-row" id="right-row-bottom">
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-10/1200/900" alt="Placeholder 10" />
            </div>
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-11/1200/900" alt="Placeholder 11" />
            </div>
            <div class="cell">
              <img src="https://picsum.photos/seed/gpt52-12/1200/900" alt="Placeholder 12" />
            </div>
          </div>
        </section>
      </div>
    </div>

    <div class="hint">
      Drag the <strong>white gutters</strong> to resize. Row gutter: <kbd>↑↓</kbd> resize. Column gutters: <kbd>←→</kbd> resize.
      The page size stays fixed; only adjacent areas redistribute space.
    </div>

    <!-- Split.js CDN (lightweight helper for resizable gutters) -->
    <script src="https://unpkg.com/split.js/dist/split.min.js"></script>

    <script>
      // Keep it simple: no persisted state (per spec).
      document.addEventListener("DOMContentLoaded", () => {
        const GUTTER_SIZE = 12; // same horizontal/vertical

        const commonOptions = {
          gutterSize: GUTTER_SIZE,
          snapOffset: 0,
          // Split.js will clamp with minSize; we also keep it modest so small viewports still work.
        };

        // Horizontal gutter between the two rows on each page (direction: vertical)
        Split(["#left-row-top", "#left-row-bottom"], {
          ...commonOptions,
          direction: "vertical",
          sizes: [50, 50],
          minSize: 90,
          cursor: "row-resize",
        });

        Split(["#right-row-top", "#right-row-bottom"], {
          ...commonOptions,
          direction: "vertical",
          sizes: [50, 50],
          minSize: 90,
          cursor: "row-resize",
        });

        // Vertical gutters between cells within each row (direction: horizontal)
        const rowSelectors = ["#left-row-top", "#left-row-bottom", "#right-row-top", "#right-row-bottom"];
        for (const rowSel of rowSelectors) {
          const cells = document.querySelectorAll(`${rowSel} .cell`);
          Split(cells, {
            ...commonOptions,
            direction: "horizontal",
            sizes: [33.33, 33.34, 33.33],
            minSize: 70,
            cursor: "col-resize",
          });
        }

        // Make the spread fill the viewport as much as possible while keeping a clean 2-page composition.
        // (We don't persist state; we simply recompute layout on resize.)
        const spread = document.getElementById("spread");
        const updateSpreadFit = () => {
          // We want "fill width" behavior, but avoid overflowing height in common cases.
          // Compute a best-fit size that preserves exact 35:29 per-page aspect,
          // taking the spread padding and inter-page gap into account.
          const margin = 36; // matches .app padding sum (18px top/bottom)
          const availW = Math.max(320, window.innerWidth - margin);
          const availH = Math.max(320, window.innerHeight - margin);

          // Must match CSS: .spread { padding: 14px; gap: 10px; }
          const PAD = 14;
          const GAP = 10;
          const PAGE_W = 35;
          const PAGE_H = 29;

          // Given a desired spread width, compute the spread height that makes each page exactly 35:29.
          // innerW = w - 2*PAD - GAP; pageW = innerW/2; pageH = pageW * (29/35); h = 2*PAD + pageH
          const heightForWidth = (w) => {
            const innerW = Math.max(1, w - 2 * PAD - GAP);
            const pageW = innerW / 2;
            const pageH = pageW * (PAGE_H / PAGE_W);
            return 2 * PAD + pageH;
          };

          // Given a desired spread height, compute the spread width that makes each page exactly 35:29.
          // innerH = h - 2*PAD; pageW = innerH * (35/29); innerW = 2*pageW; w = 2*PAD + GAP + innerW
          const widthForHeight = (h) => {
            const innerH = Math.max(1, h - 2 * PAD);
            const pageW = innerH * (PAGE_W / PAGE_H);
            const innerW = 2 * pageW;
            return 2 * PAD + GAP + innerW;
          };

          let w = availW;
          let h = heightForWidth(w);
          if (h > availH) {
            h = availH;
            w = widthForHeight(h);
          }

          spread.style.width = `${Math.floor(w)}px`;
          spread.style.height = `${Math.floor(h)}px`;
        };

        updateSpreadFit();
        window.addEventListener("resize", updateSpreadFit, { passive: true });
      });
    </script>
  </body>
</html>


